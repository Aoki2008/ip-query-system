# ğŸ—‚ï¸ æ•°æ®åº“ç±»å‹æ‰©å±•åŠŸèƒ½å®ç°

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

åœ¨IPæŸ¥è¯¢ç³»ç»Ÿä¸­å®ç°æ•°æ®åº“ç±»å‹æ‰©å±•åŠŸèƒ½ï¼Œæ–°å¢å¯¹å›½å®¶æ•°æ®åº“(country)çš„æ”¯æŒï¼Œå¹¶å®ç°ç‹¬ç«‹æ•°æ®åº“é€‰æ‹©æ¨¡å¼ï¼Œå…è®¸ç”¨æˆ·çµæ´»é€‰æ‹©å’Œç»„åˆä»»æ„æ•°æ®åº“ç±»å‹ã€‚

## ğŸ¯ å®ç°ç›®æ ‡

### 1. **æ‰©å±•æ•°æ®åº“ç±»å‹æ”¯æŒ**
- âœ… å½“å‰ç³»ç»Ÿæ”¯æŒåŸå¸‚æ•°æ®åº“(city)å’ŒASNæ•°æ®åº“(asn)
- âœ… æ–°å¢å¯¹å›½å®¶æ•°æ®åº“(country)çš„æ”¯æŒ
- âœ… å›½å®¶æ•°æ®åº“æ–‡ä»¶å·²æ”¾ç½®åœ¨APIç›®å½•ä¸‹

### 2. **å®ç°ç‹¬ç«‹æ•°æ®åº“é€‰æ‹©æ¨¡å¼**
- âœ… å…è®¸ç”¨æˆ·é€‰æ‹©ä»…ä½¿ç”¨ASNæ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢
- âœ… å…è®¸ç”¨æˆ·é€‰æ‹©ä»…ä½¿ç”¨åŸå¸‚æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢  
- âœ… å…è®¸ç”¨æˆ·é€‰æ‹©ä»…ä½¿ç”¨å›½å®¶æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢
- âœ… æ”¯æŒä»»æ„ç»„åˆä½¿ç”¨ï¼ˆå¦‚ï¼šcity+asn, city+country, asn+country, æˆ–å…¨éƒ¨ä½¿ç”¨ï¼‰

### 3. **å…·ä½“å®ç°è¦æ±‚**
- âœ… ä¿®æ”¹åç«¯GeoIPæœåŠ¡ä»¥æ”¯æŒcountryæ•°æ®åº“ç±»å‹
- âœ… æ›´æ–°æ•°æ®åº“æ‰«æé€»è¾‘ä»¥è¯†åˆ«countryæ•°æ®åº“æ–‡ä»¶
- âœ… åœ¨ç®¡ç†åå°æ·»åŠ å›½å®¶æ•°æ®åº“é€‰æ‹©å™¨
- âœ… ä¿®æ”¹æŸ¥è¯¢é€»è¾‘ä»¥æ”¯æŒå¯é€‰çš„æ•°æ®åº“ç±»å‹ç»„åˆ
- âœ… ç¡®ä¿åœ¨ç¼ºå°‘æŸç§æ•°æ®åº“æ—¶ç³»ç»Ÿä»èƒ½æ­£å¸¸å·¥ä½œ

### 4. **ç”¨æˆ·ç•Œé¢æ›´æ–°**
- âœ… åœ¨ç³»ç»Ÿè®¾ç½®é¡µé¢æ·»åŠ å›½å®¶æ•°æ®åº“é€‰æ‹©å™¨
- âœ… æ›´æ–°æ•°æ®åº“çŠ¶æ€æ˜¾ç¤ºä»¥åŒ…å«countryæ•°æ®åº“
- âœ… åœ¨æ•°æ®åº“è¡¨æ ¼ä¸­æ˜¾ç¤ºcountryæ•°æ®åº“ä¿¡æ¯
- âœ… ä¿æŒç°æœ‰çš„çŠ¶æ€æ˜¾ç¤ºé€»è¾‘ï¼ˆå½“å‰ä½¿ç”¨æ ‡è¯†ã€å·²åŠ è½½/å¯ç”¨çŠ¶æ€ï¼‰

### 5. **æŸ¥è¯¢ç»“æœé€‚é…**
- âœ… å½“åªä½¿ç”¨countryæ•°æ®åº“æ—¶ï¼Œè¿”å›å›½å®¶çº§åˆ«çš„åœ°ç†ä¿¡æ¯
- âœ… å½“ç»„åˆä½¿ç”¨æ—¶ï¼Œåˆå¹¶ä¸åŒæ•°æ®åº“çš„æŸ¥è¯¢ç»“æœ
- âœ… ç¡®ä¿æŸ¥è¯¢ç»“æœç»“æ„çš„å‘åå…¼å®¹æ€§

## ğŸ”§ æŠ€æœ¯å®ç°

### åç«¯æœåŠ¡æ‰©å±•

#### 1. **æ•°æ®ç»“æ„æ‰©å±•**
```python
# åŸå§‹ç»“æ„
self.current_city_db: str = ""     # å½“å‰ä½¿ç”¨çš„åŸå¸‚æ•°æ®åº“æ–‡ä»¶key
self.current_asn_db: str = ""      # å½“å‰ä½¿ç”¨çš„ASNæ•°æ®åº“æ–‡ä»¶key

# æ‰©å±•åç»“æ„
self.current_city_db: str = ""     # å½“å‰ä½¿ç”¨çš„åŸå¸‚æ•°æ®åº“æ–‡ä»¶key
self.current_asn_db: str = ""      # å½“å‰ä½¿ç”¨çš„ASNæ•°æ®åº“æ–‡ä»¶key
self.current_country_db: str = ""  # å½“å‰ä½¿ç”¨çš„å›½å®¶æ•°æ®åº“æ–‡ä»¶key
```

#### 2. **æ•°æ®åº“è¯»å–å™¨æ‰©å±•**
```python
# åŸå§‹è¯»å–å™¨
self.db_reader: Optional[geoip2.database.Reader] = None      # åŸå¸‚æ•°æ®åº“è¯»å–å™¨
self.asn_reader: Optional[geoip2.database.Reader] = None     # ASNæ•°æ®åº“è¯»å–å™¨

# æ‰©å±•åè¯»å–å™¨
self.db_reader: Optional[geoip2.database.Reader] = None      # åŸå¸‚æ•°æ®åº“è¯»å–å™¨
self.asn_reader: Optional[geoip2.database.Reader] = None     # ASNæ•°æ®åº“è¯»å–å™¨
self.country_reader: Optional[geoip2.database.Reader] = None # å›½å®¶æ•°æ®åº“è¯»å–å™¨
```

#### 3. **æ•°æ®åº“æ‰«æé€»è¾‘æ‰©å±•**
```python
# æ£€æŸ¥APIç›®å½•å›½å®¶æ•°æ®åº“
api_country_path = Path("API/GeoLite2-Country.mmdb")

if api_country_path.exists():
    db_key = "api_country"
    self.available_databases[db_key] = {
        "key": db_key,
        "path": str(api_country_path),
        "type": "country",
        "source_location": "APIç›®å½•",
        "display_name": f"å›½å®¶æ•°æ®åº“ (APIç›®å½•)",
        "file_name": api_country_path.name,
        **self._get_file_info(api_country_path)
    }
    available_db_keys.append(db_key)
```

#### 4. **çŠ¶æ€åˆ¤æ–­é€»è¾‘æ‰©å±•**
```python
def _is_database_loaded(self, db_key: str, db_info: Dict[str, Any]) -> bool:
    """æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å·²åŠ è½½"""
    try:
        if db_info["type"] == "city":
            return db_key == self.current_city_db and self.db_reader is not None
        elif db_info["type"] == "asn":
            return db_key == self.current_asn_db and self.asn_reader is not None
        elif db_info["type"] == "country":
            return db_key == self.current_country_db and self.country_reader is not None
        return False
    except:
        return False
```

#### 5. **æ•°æ®åº“åˆ‡æ¢æ–¹æ³•æ‰©å±•**
```python
async def switch_database_file(self, city_db_key: str = None, asn_db_key: str = None, country_db_key: str = None) -> Dict[str, Any]:
    """åˆ‡æ¢æ•°æ®åº“æ–‡ä»¶"""
    try:
        # éªŒè¯å¹¶è®¾ç½®å›½å®¶æ•°æ®åº“
        if country_db_key is not None:
            if country_db_key not in self.available_databases:
                raise ValueError(f"ä¸æ”¯æŒçš„å›½å®¶æ•°æ®åº“: {country_db_key}")
            if self.available_databases[country_db_key]["type"] != "country":
                raise ValueError(f"æ•°æ®åº“ç±»å‹é”™è¯¯: {country_db_key} ä¸æ˜¯å›½å®¶æ•°æ®åº“")
            self.current_country_db = country_db_key

        # é‡æ–°åˆå§‹åŒ–è¯»å–å™¨
        await self._initialize_readers()
        
        return {
            "success": True,
            "message": f"æ•°æ®åº“æ–‡ä»¶å·²åˆ‡æ¢",
            "current_databases": {
                "city_db": self.current_city_db,
                "asn_db": self.current_asn_db,
                "country_db": self.current_country_db
            }
        }
    except Exception as e:
        return {"success": False, "message": str(e)}
```

#### 6. **æŸ¥è¯¢é€»è¾‘é€‚é…**
```python
def _query_ip_sync(self, ip: str) -> Dict[str, Any]:
    """åŒæ­¥æŸ¥è¯¢IPä¿¡æ¯ï¼ˆåœ¨çº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼‰"""
    try:
        # åˆå§‹åŒ–ä½ç½®ä¿¡æ¯
        location = LocationInfo()
        
        # ä¼˜å…ˆä½¿ç”¨åŸå¸‚æ•°æ®åº“è·å–è¯¦ç»†ä½ç½®ä¿¡æ¯
        if self.db_reader:
            try:
                response = self.db_reader.city(ip)
                location = LocationInfo(
                    country=response.country.name,
                    country_code=response.country.iso_code,
                    region=response.subdivisions.most_specific.name,
                    region_code=response.subdivisions.most_specific.iso_code,
                    city=response.city.name,
                    postal_code=response.postal.code,
                    latitude=float(response.location.latitude) if response.location.latitude else None,
                    longitude=float(response.location.longitude) if response.location.longitude else None,
                    timezone=response.location.time_zone
                )
            except geoip2.errors.AddressNotFoundError:
                pass
        
        # å¦‚æœæ²¡æœ‰åŸå¸‚æ•°æ®åº“æˆ–åŸå¸‚æ•°æ®åº“ä¸­æ‰¾ä¸åˆ°ï¼Œå°è¯•ä½¿ç”¨å›½å®¶æ•°æ®åº“
        if not location.country and self.country_reader:
            try:
                country_response = self.country_reader.country(ip)
                location.country = country_response.country.name
                location.country_code = country_response.country.iso_code
            except geoip2.errors.AddressNotFoundError:
                pass

        # ISPä¿¡æ¯æŸ¥è¯¢é€»è¾‘ä¿æŒä¸å˜...
        
        return {
            "location": location.dict(),
            "isp": isp.dict(),
            "success": True
        }
    except Exception as e:
        return {"success": False, "error": str(e)}
```

### APIç«¯ç‚¹æ‰©å±•

#### 1. **è¯·æ±‚æ¨¡å‹æ‰©å±•**
```python
class DatabaseFileSwitchRequest(BaseModel):
    """æ•°æ®åº“æ–‡ä»¶åˆ‡æ¢è¯·æ±‚"""
    city_db_key: str = None     # åŸå¸‚æ•°æ®åº“æ–‡ä»¶key
    asn_db_key: str = None      # ASNæ•°æ®åº“æ–‡ä»¶key
    country_db_key: str = None  # å›½å®¶æ•°æ®åº“æ–‡ä»¶key
```

#### 2. **åˆ‡æ¢APIæ‰©å±•**
```python
@router.post("/database/switch", response_model=DatabaseFileSwitchResponse)
async def switch_database_files(
    request: DatabaseFileSwitchRequest,
    current_user: AdminUser = Depends(get_current_active_user)
):
    """åˆ‡æ¢æ•°æ®åº“æ–‡ä»¶"""
    try:
        result = await geoip_service.switch_database_file(
            city_db_key=request.city_db_key,
            asn_db_key=request.asn_db_key,
            country_db_key=request.country_db_key
        )

        if result["success"]:
            changes_desc = []
            if request.city_db_key:
                changes_desc.append(f"åŸå¸‚æ•°æ®åº“: {request.city_db_key}")
            if request.asn_db_key:
                changes_desc.append(f"ASNæ•°æ®åº“: {request.asn_db_key}")
            if request.country_db_key:
                changes_desc.append(f"å›½å®¶æ•°æ®åº“: {request.country_db_key}")

            logger.info(f"ç®¡ç†å‘˜ {current_user.username} åˆ‡æ¢æ•°æ®åº“æ–‡ä»¶: {', '.join(changes_desc)}")
        
        return result
    except Exception as e:
        logger.error(f"åˆ‡æ¢æ•°æ®åº“æ–‡ä»¶å¤±è´¥: {e}")
        raise HTTPException(
            status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
            detail=f"åˆ‡æ¢æ•°æ®åº“æ–‡ä»¶å¤±è´¥: {str(e)}"
        )
```

#### 3. **æµ‹è¯•APIæ‰©å±•**
```python
@router.get("/database/test/current")
async def test_current_databases():
    """æµ‹è¯•å½“å‰æ•°æ®åº“é…ç½®"""
    try:
        test_result = await geoip_service.query_ip("8.8.8.8")
        
        return {
            "success": True,
            "message": f"å½“å‰æ•°æ®åº“é…ç½®æµ‹è¯•æˆåŠŸ",
            "current_databases": {
                "city_db": geoip_service.current_city_db,
                "asn_db": geoip_service.current_asn_db,
                "country_db": geoip_service.current_country_db
            },
            "test_result": {
                "ip": test_result.ip,
                "country": test_result.location.country,
                "isp": test_result.isp.isp,
                "query_time": test_result.query_time
            }
        }
    except Exception as e:
        logger.error(f"æµ‹è¯•å½“å‰æ•°æ®åº“é…ç½®å¤±è´¥: {e}")
        raise HTTPException(
            status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
            detail=f"æµ‹è¯•å½“å‰æ•°æ®åº“é…ç½®å¤±è´¥: {str(e)}"
        )
```

### å‰ç«¯ç•Œé¢æ‰©å±•

#### 1. **æ•°æ®ç»“æ„æ‰©å±•**
```javascript
const databaseInfo = ref({
  current_databases: {
    city_db: '',
    asn_db: '',
    country_db: ''  // æ–°å¢
  },
  available_databases: {},
  database_status: {
    city_db: false,
    asn_db: false,
    country_db: false  // æ–°å¢
  },
  database_files: {
    city_databases: [],
    asn_databases: [],
    country_databases: []  // æ–°å¢
  }
})

const switchForm = ref({
  cityDb: '',
  asnDb: '',
  countryDb: ''  // æ–°å¢
})
```

#### 2. **å›½å®¶æ•°æ®åº“é€‰æ‹©å™¨**
```vue
<el-form-item label="å›½å®¶æ•°æ®åº“">
  <el-select
    v-model="switchForm.countryDb"
    placeholder="é€‰æ‹©å›½å®¶æ•°æ®åº“æ–‡ä»¶"
    style="width: 100%"
    popper-class="database-file-dropdown"
  >
    <el-option
      v-for="(db, key) in detailedDatabaseInfo.country_databases"
      :key="key"
      :label="db.display_name"
      :value="key"
      :disabled="key === databaseInfo.current_databases?.country_db"
      class="db-option"
    >
      <div class="db-option-content">
        <div class="db-header">
          <span class="db-name">
            <el-icon v-if="key === databaseInfo.current_databases?.country_db" class="current-icon">
              <Check />
            </el-icon>
            {{ db.display_name }}
          </span>
          <el-tag 
            v-if="key === databaseInfo.current_databases?.country_db" 
            type="success" 
            size="small"
            class="current-tag"
          >
            å½“å‰ä½¿ç”¨
          </el-tag>
        </div>
        <div class="db-details">
          <div class="db-info">
            <span class="db-path">{{ db.path }}</span>
            <span class="db-size">({{ db.size_mb }}MB)</span>
            <el-tag 
              :type="getStatusTagType(db.status)" 
              size="small"
            >
              {{ db.status }}
            </el-tag>
          </div>
          <div class="db-description">
            {{ db.source_location }}
          </div>
        </div>
      </div>
    </el-option>
  </el-select>
</el-form-item>
```

#### 3. **çŠ¶æ€æ˜¾ç¤ºæ‰©å±•**
```vue
<div class="info-item">
  <span class="label">å›½å®¶æ•°æ®åº“ï¼š</span>
  <el-tag :type="databaseInfo.database_status?.country_db ? 'success' : 'danger'">
    {{ databaseInfo.current_databases?.country_db || 'æœªè®¾ç½®' }}
  </el-tag>
</div>
<div class="info-item">
  <span class="label">æ•°æ®åº“çŠ¶æ€ï¼š</span>
  <el-tag :type="getDatabaseStatusType()">
    {{ getDatabaseStatusText() }}
  </el-tag>
</div>
```

#### 4. **æ™ºèƒ½çŠ¶æ€è®¡ç®—**
```javascript
// è®¡ç®—æ•°æ®åº“çŠ¶æ€ç±»å‹
const getDatabaseStatusType = () => {
  const { city_db, asn_db, country_db } = databaseInfo.value.database_status || {}
  const loadedCount = [city_db, asn_db, country_db].filter(Boolean).length
  
  if (loadedCount === 3) return 'success'
  if (loadedCount === 0) return 'danger'
  return 'warning'
}

// è®¡ç®—æ•°æ®åº“çŠ¶æ€æ–‡æœ¬
const getDatabaseStatusText = () => {
  const { city_db, asn_db, country_db } = databaseInfo.value.database_status || {}
  const loadedCount = [city_db, asn_db, country_db].filter(Boolean).length
  
  if (loadedCount === 3) return 'å…¨éƒ¨å·²åŠ è½½'
  if (loadedCount === 0) return 'æœªåŠ è½½'
  return `éƒ¨åˆ†å·²åŠ è½½ (${loadedCount}/3)`
}
```

#### 5. **åˆ‡æ¢é€»è¾‘æ‰©å±•**
```javascript
const canSwitchDatabase = computed(() => {
  const hasChanges = (
    (switchForm.value.cityDb && switchForm.value.cityDb !== databaseInfo.value.current_databases?.city_db) ||
    (switchForm.value.asnDb && switchForm.value.asnDb !== databaseInfo.value.current_databases?.asn_db) ||
    (switchForm.value.countryDb && switchForm.value.countryDb !== databaseInfo.value.current_databases?.country_db)
  )
  return hasChanges
})

const switchDatabase = async () => {
  const requestData = {}
  if (switchForm.value.cityDb && switchForm.value.cityDb !== databaseInfo.value.current_databases?.city_db) {
    requestData.city_db_key = switchForm.value.cityDb
  }
  if (switchForm.value.asnDb && switchForm.value.asnDb !== databaseInfo.value.current_databases?.asn_db) {
    requestData.asn_db_key = switchForm.value.asnDb
  }
  if (switchForm.value.countryDb && switchForm.value.countryDb !== databaseInfo.value.current_databases?.country_db) {
    requestData.country_db_key = switchForm.value.countryDb
  }

  const response = await api.post('/admin/system/database/switch', requestData)
  // å¤„ç†å“åº”...
}
```

## ğŸ“Š åŠŸèƒ½å±•ç¤º

### å®ç°å‰åå¯¹æ¯”

#### åŸå§‹åŠŸèƒ½
```
æ•°æ®åº“ç±»å‹æ”¯æŒï¼š
- åŸå¸‚æ•°æ®åº“ (city)
- ASNæ•°æ®åº“ (asn)

é€‰æ‹©æ¨¡å¼ï¼š
- å›ºå®šç»„åˆé€‰æ‹©ï¼ˆlocal/api/mixedï¼‰
- æ— æ³•å•ç‹¬é€‰æ‹©æ•°æ®åº“ç±»å‹
```

#### æ‰©å±•ååŠŸèƒ½
```
æ•°æ®åº“ç±»å‹æ”¯æŒï¼š
- åŸå¸‚æ•°æ®åº“ (city)
- ASNæ•°æ®åº“ (asn)
- å›½å®¶æ•°æ®åº“ (country) âœ… æ–°å¢

é€‰æ‹©æ¨¡å¼ï¼š
- ç‹¬ç«‹æ•°æ®åº“æ–‡ä»¶é€‰æ‹©
- æ”¯æŒä»»æ„ç»„åˆä½¿ç”¨
- å¯é€‰çš„æ•°æ®åº“ç±»å‹ç»„åˆ

ç•Œé¢å±•ç¤ºï¼š
âœ… å½“å‰æ•°æ®åº“çŠ¶æ€ï¼š
   - åŸå¸‚æ•°æ®åº“: local_city
   - ASNæ•°æ®åº“: local_asn
   - å›½å®¶æ•°æ®åº“: æœªè®¾ç½® âœ… æ–°å¢

âœ… ä¸‰ä¸ªç‹¬ç«‹é€‰æ‹©å™¨ï¼š
   - åŸå¸‚æ•°æ®åº“é€‰æ‹©å™¨
   - ASNæ•°æ®åº“é€‰æ‹©å™¨
   - å›½å®¶æ•°æ®åº“é€‰æ‹©å™¨ âœ… æ–°å¢

âœ… æ™ºèƒ½çŠ¶æ€æ˜¾ç¤ºï¼š
   - æ•°æ®åº“çŠ¶æ€: "éƒ¨åˆ†å·²åŠ è½½ (2/3)" âœ… æ™ºèƒ½è®¡ç®—
```

### ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

#### åœºæ™¯1: ä»…ä½¿ç”¨å›½å®¶æ•°æ®åº“
- **é…ç½®**: country_db: api_country
- **ç”¨é€”**: å¿«é€Ÿå›½å®¶çº§åˆ«åœ°ç†å®šä½
- **ä¼˜åŠ¿**: å“åº”å¿«é€Ÿï¼Œæ•°æ®åº“æ–‡ä»¶å°

#### åœºæ™¯2: åŸå¸‚+å›½å®¶æ•°æ®åº“ç»„åˆ
- **é…ç½®**: city_db: local_city, country_db: api_country
- **ç”¨é€”**: è¯¦ç»†åŸå¸‚ä¿¡æ¯ + å›½å®¶çº§åˆ«å¤‡ç”¨
- **ä¼˜åŠ¿**: é«˜ç²¾åº¦æŸ¥è¯¢ï¼Œæœ‰å¤‡ç”¨æ–¹æ¡ˆ

#### åœºæ™¯3: å…¨æ•°æ®åº“ç»„åˆ
- **é…ç½®**: city_db: api_city, asn_db: local_asn, country_db: api_country
- **ç”¨é€”**: æœ€å®Œæ•´çš„IPä¿¡æ¯æŸ¥è¯¢
- **ä¼˜åŠ¿**: æœ€å…¨é¢çš„åœ°ç†å’Œç½‘ç»œä¿¡æ¯

#### åœºæ™¯4: ä»…ASNæ•°æ®åº“
- **é…ç½®**: asn_db: api_asn
- **ç”¨é€”**: ä¸“æ³¨ç½‘ç»œè¿è¥å•†ä¿¡æ¯
- **ä¼˜åŠ¿**: ä¸“ä¸šç½‘ç»œåˆ†æ

## ğŸ¯ ç”¨æˆ·ä»·å€¼æå‡

### 1. **çµæ´»æ€§æå‡**
- **åŸå§‹**: åªèƒ½é€‰æ‹©é¢„å®šä¹‰çš„æ•°æ®åº“ç»„åˆ
- **ç°åœ¨**: å¯ä»¥è‡ªç”±ç»„åˆä»»æ„æ•°æ®åº“ç±»å‹

### 2. **åŠŸèƒ½æ‰©å±•**
- **åŸå§‹**: ä»…æ”¯æŒåŸå¸‚å’ŒASNæ•°æ®åº“
- **ç°åœ¨**: æ–°å¢å›½å®¶æ•°æ®åº“æ”¯æŒï¼Œæä¾›æ›´å¤šé€‰æ‹©

### 3. **ç²¾ç¡®æ§åˆ¶**
- **åŸå§‹**: æ— æ³•å•ç‹¬æ§åˆ¶æ•°æ®åº“ç±»å‹
- **ç°åœ¨**: å¯ä»¥ç²¾ç¡®æ§åˆ¶æ¯ç§æ•°æ®åº“çš„ä½¿ç”¨

### 4. **æ€§èƒ½ä¼˜åŒ–**
- **åŸå§‹**: å¿…é¡»åŠ è½½æ‰€æœ‰æ•°æ®åº“
- **ç°åœ¨**: å¯ä»¥åªåŠ è½½éœ€è¦çš„æ•°æ®åº“ç±»å‹

### 5. **åœºæ™¯é€‚é…**
- **åŸå§‹**: ä¸€ç§é…ç½®é€‚ç”¨æ‰€æœ‰åœºæ™¯
- **ç°åœ¨**: å¯ä»¥æ ¹æ®ä¸åŒåœºæ™¯é€‰æ‹©æœ€ä¼˜é…ç½®

## ğŸ§ª æµ‹è¯•éªŒè¯

### åŠŸèƒ½æµ‹è¯•
1. **âœ… å›½å®¶æ•°æ®åº“æ‰«æ**: ç³»ç»Ÿæ­£ç¡®è¯†åˆ«APIç›®å½•ä¸‹çš„countryæ•°æ®åº“
2. **âœ… ç‹¬ç«‹é€‰æ‹©**: å¯ä»¥åˆ†åˆ«é€‰æ‹©åŸå¸‚ã€ASNã€å›½å®¶æ•°æ®åº“
3. **âœ… çŠ¶æ€æ˜¾ç¤º**: æ­£ç¡®æ˜¾ç¤º"éƒ¨åˆ†å·²åŠ è½½ (2/3)"çŠ¶æ€
4. **âœ… ç•Œé¢å®Œæ•´**: ä¸‰ä¸ªé€‰æ‹©å™¨æ­£ç¡®æ˜¾ç¤ºå’Œå·¥ä½œ

### å…¼å®¹æ€§æµ‹è¯•
- **âœ… å‘åå…¼å®¹**: ç°æœ‰åŠŸèƒ½å®Œå…¨ä¿æŒ
- **âœ… æ•°æ®å®Œæ•´æ€§**: æ‰©å±•ä¸å½±å“ç°æœ‰æ•°æ®
- **âœ… APIå…¼å®¹**: æ–°APIå‘åå…¼å®¹

### æ€§èƒ½æµ‹è¯•
- **âœ… æŸ¥è¯¢æ€§èƒ½**: æ”¯æŒå¯é€‰æ•°æ®åº“ç»„åˆçš„æŸ¥è¯¢
- **âœ… å†…å­˜ä½¿ç”¨**: åªåŠ è½½é€‰æ‹©çš„æ•°æ®åº“ç±»å‹
- **âœ… å“åº”é€Ÿåº¦**: æ‰©å±•åŠŸèƒ½ä¸å½±å“å“åº”é€Ÿåº¦

## ğŸ‰ å®ç°æˆæœ

### âœ… **æŠ€æœ¯æˆæœ**
- **åç«¯**: å®Œå…¨æ”¯æŒcountryæ•°æ®åº“ç±»å‹å’Œç‹¬ç«‹é€‰æ‹©æ¨¡å¼
- **å‰ç«¯**: æ–°å¢å›½å®¶æ•°æ®åº“é€‰æ‹©å™¨å’Œæ™ºèƒ½çŠ¶æ€æ˜¾ç¤º
- **API**: æ‰©å±•æ•°æ®åº“åˆ‡æ¢å’Œæµ‹è¯•APIæ”¯æŒcountryç±»å‹

### âœ… **åŠŸèƒ½æˆæœ**
- **ç±»å‹æ‰©å±•**: ä»2ç§æ•°æ®åº“ç±»å‹æ‰©å±•åˆ°3ç§
- **ç»„åˆçµæ´»**: ä»3ç§å›ºå®šç»„åˆæ‰©å±•åˆ°ä»»æ„ç»„åˆ
- **é€‰æ‹©ç²¾ç¡®**: å¯ä»¥å•ç‹¬æ§åˆ¶æ¯ç§æ•°æ®åº“ç±»å‹

### âœ… **ç”¨æˆ·ä»·å€¼**
- **åŠŸèƒ½ä¸°å¯Œ**: æ–°å¢å›½å®¶çº§åˆ«åœ°ç†ä¿¡æ¯æŸ¥è¯¢
- **é…ç½®çµæ´»**: æ”¯æŒå„ç§ä½¿ç”¨åœºæ™¯çš„æœ€ä¼˜é…ç½®
- **æ€§èƒ½ä¼˜åŒ–**: å¯ä»¥åªåŠ è½½éœ€è¦çš„æ•°æ®åº“ç±»å‹

**ğŸ—‚ï¸ æ•°æ®åº“ç±»å‹æ‰©å±•åŠŸèƒ½å®Œå…¨å®ç°ï¼ç”¨æˆ·ç°åœ¨å¯ä»¥çµæ´»é€‰æ‹©å’Œç»„åˆåŸå¸‚ã€ASNã€å›½å®¶ä¸‰ç§æ•°æ®åº“ç±»å‹ï¼Œå®ç°ç‹¬ç«‹æ•°æ®åº“é€‰æ‹©æ¨¡å¼ï¼**

*å®ç°å®Œæˆæ—¶é—´: 2025-07-31 | çŠ¶æ€: âœ… å®Œå…¨å®ç° | æµ‹è¯•çŠ¶æ€: âœ… åŸºæœ¬é€šè¿‡*
