name: Health Check

on:
  schedule:
    # æ¯å¤©UTCæ—¶é—´00:00è¿è¡Œ
    - cron: '0 0 * * *'
  workflow_dispatch:

jobs:
  health-check:
    runs-on: ubuntu-latest
    name: System Health Check
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Check project structure
      run: |
        echo "ğŸ” æ£€æŸ¥é¡¹ç›®ç»“æ„..."
        ls -la
        echo "ğŸ“ åç«¯ç›®å½•:"
        ls -la backend-fastapi/ || echo "åç«¯ç›®å½•ä¸å­˜åœ¨"
        echo "ğŸ“ å‰ç«¯ç›®å½•:"
        ls -la frontend-vue3/ || echo "å‰ç«¯ç›®å½•ä¸å­˜åœ¨"
        echo "ğŸ“ ç®¡ç†åå°ç›®å½•:"
        ls -la frontend-admin/ || echo "ç®¡ç†åå°ç›®å½•ä¸å­˜åœ¨"
        echo "ğŸ“ æ–‡æ¡£ç›®å½•:"
        ls -la docs/ || echo "æ–‡æ¡£ç›®å½•ä¸å­˜åœ¨"
    
    - name: Check configuration files
      run: |
        echo "ğŸ”§ æ£€æŸ¥é…ç½®æ–‡ä»¶..."
        echo "Docker Compose:"
        test -f docker-compose.yml && echo "âœ… docker-compose.yml å­˜åœ¨" || echo "âŒ docker-compose.yml ä¸å­˜åœ¨"
        echo "åç«¯é…ç½®:"
        test -f backend-fastapi/requirements.txt && echo "âœ… requirements.txt å­˜åœ¨" || echo "âŒ requirements.txt ä¸å­˜åœ¨"
        echo "å‰ç«¯é…ç½®:"
        test -f frontend-vue3/package.json && echo "âœ… frontend package.json å­˜åœ¨" || echo "âŒ frontend package.json ä¸å­˜åœ¨"
        test -f frontend-admin/package.json && echo "âœ… admin package.json å­˜åœ¨" || echo "âŒ admin package.json ä¸å­˜åœ¨"
    
    - name: Validate CI configuration
      run: |
        echo "ğŸ” éªŒè¯CIé…ç½®..."
        test -f .github/workflows/ci.yml && echo "âœ… CIé…ç½®å­˜åœ¨" || echo "âŒ CIé…ç½®ä¸å­˜åœ¨"
        echo "CIé…ç½®å†…å®¹æ£€æŸ¥:"
        grep -q "backend-fastapi" .github/workflows/ci.yml && echo "âœ… åŒ…å«åç«¯è·¯å¾„" || echo "âŒ ç¼ºå°‘åç«¯è·¯å¾„"
        grep -q "frontend-vue3" .github/workflows/ci.yml && echo "âœ… åŒ…å«å‰ç«¯è·¯å¾„" || echo "âŒ ç¼ºå°‘å‰ç«¯è·¯å¾„"
        grep -q "frontend-admin" .github/workflows/ci.yml && echo "âœ… åŒ…å«ç®¡ç†åå°è·¯å¾„" || echo "âŒ ç¼ºå°‘ç®¡ç†åå°è·¯å¾„"
