---
type: "conditional_apply"
priority: "high"
---

# 📋 项目代码质量和安全规范

## 🔒 安全开发规范

### 🛡️ 代码安全
- 禁止在代码中硬编码敏感信息（密码、API密钥、数据库连接字符串）
- 所有敏感配置必须使用环境变量或配置文件
- 生产环境配置文件不得提交到版本控制
- 定期检查和更新依赖包的安全漏洞

### 🔐 认证和授权
- 所有API接口必须进行适当的认证和授权检查
- 使用强密码策略和密码哈希存储
- 实施会话管理和令牌过期机制
- 记录所有认证和授权相关的操作日志

### 🌐 网络安全
- 正确配置CORS策略，避免过于宽松的设置
- 实施API限流和防止暴力攻击
- 使用HTTPS进行数据传输
- 验证和清理所有用户输入，防止注入攻击

## 💻 代码质量规范

### 📝 代码风格
- 遵循项目统一的代码风格和命名规范
- 使用有意义的变量名和函数名
- 保持代码简洁、可读性强
- 添加必要的注释和文档字符串

### 🧪 测试要求
- 新功能必须编写对应的单元测试
- 关键业务逻辑需要集成测试覆盖
- 测试覆盖率不低于80%
- 所有测试必须通过才能合并代码

### 🔍 代码审查
- 所有代码变更必须经过代码审查
- 审查重点关注安全性、性能和可维护性
- 修复所有静态代码分析工具发现的问题
- 确保代码符合项目架构设计

## 📊 性能优化规范

### ⚡ 性能要求
- API响应时间不超过2秒
- 数据库查询必须使用索引优化
- 实施适当的缓存策略
- 避免N+1查询问题

### 📈 监控和日志
- 关键操作必须记录详细日志
- 实施性能监控和告警机制
- 定期分析系统性能指标
- 建立错误追踪和报告机制

## 🚀 部署和运维规范

### 🐳 容器化要求
- 所有服务必须支持Docker容器化部署
- 使用多阶段构建优化镜像大小
- 正确配置健康检查和资源限制
- 实施容器安全扫描

### 🔄 CI/CD流程
- 代码提交触发自动化测试
- 通过所有测试后才能部署
- 实施蓝绿部署或滚动更新
- 保持部署回滚能力

### 📋 文档维护
- 及时更新API文档和技术文档
- 记录重要的架构决策和变更
- 维护部署和运维手册
- 建立故障排除指南

## 🎯 合规性要求

### 📜 许可证合规
- 检查所有第三方依赖的许可证
- 确保许可证兼容性
- 记录和维护许可证清单
- 避免使用有争议的开源许可证

### 🔐 数据保护
- 遵循数据保护法规要求
- 实施数据加密和访问控制
- 建立数据备份和恢复机制
- 定期进行安全审计

## ⚠️ 违规处理

### 🚨 严重违规
- 硬编码敏感信息 → 立即修复，安全审查
- 未经授权的数据访问 → 立即回滚，调查原因
- 生产环境直接修改 → 立即恢复，流程整改

### ⚡ 一般违规
- 代码风格不符 → 要求修改后重新提交
- 测试覆盖率不足 → 补充测试用例
- 文档缺失 → 补充相关文档

## 🔧 工具和检查

### 🛠️ 必需工具
- 代码格式化工具（Black、Prettier等）
- 静态代码分析工具（ESLint、Pylint等）
- 安全扫描工具（Bandit、npm audit等）
- 依赖漏洞检查工具

### ✅ 自动检查
- 提交前自动格式化代码
- CI流程中运行所有检查
- 定期扫描安全漏洞
- 监控代码质量指标

---

**📌 注意**: 本规范为强制性要求，所有团队成员必须严格遵守。违反规范的代码将被拒绝合并。
